{"mappings":"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","sources":["src/js/model.js","src/js/views/userView.js","src/js/views/movementsView.js","src/js/views/textView.js","src/js/controller.js"],"sourcesContent":["export const state = {\r\n  accounts: [\r\n    {\r\n      owner: 'Jonas Schmedtmann',\r\n      movements: [200, 450, -400, 3000, -650, -130, 70, 1300],\r\n      interestRate: 1.2, // %\r\n      pin: 1111,\r\n    },\r\n\r\n    {\r\n      owner: 'Jessica Davis',\r\n      movements: [5000, 3400, -150, -790, -3210, -1000, 8500, -30],\r\n      interestRate: 1.5,\r\n      pin: 2222,\r\n    },\r\n\r\n    {\r\n      owner: 'Steven Thomas Williams',\r\n      movements: [200, -200, 340, -300, -20, 50, 400, -460],\r\n      interestRate: 0.7,\r\n      pin: 3333,\r\n    },\r\n\r\n    {\r\n      owner: 'Sarah Smith',\r\n      movements: [430, 1000, 700, 50, 90],\r\n      interestRate: 1,\r\n      pin: 4444,\r\n    },\r\n  ],\r\n\r\n  currentAccount: {},\r\n};\r\n\r\nexport const calcBalance = function () {\r\n  state.currentAccount.balance = state.currentAccount.movements.reduce(\r\n    (accum, val) => accum + val,\r\n    0\r\n  );\r\n};\r\n\r\nexport const calcSummary = function () {\r\n  state.currentAccount.summary = {};\r\n\r\n  state.currentAccount.summary.income = state.currentAccount.movements\r\n    .filter(val => val > 0)\r\n    .reduce((acc, val) => acc + val, 0);\r\n\r\n  state.currentAccount.summary.out = state.currentAccount.movements\r\n    .filter(val => val < 0)\r\n    .reduce((acc, val) => acc + Math.abs(val), 0);\r\n\r\n  state.currentAccount.summary.interest = state.currentAccount.movements\r\n    .filter(val => val > 0)\r\n    .map(val => (val = (val * state.currentAccount.interestRate) / 100))\r\n    .filter(val => val > 1)\r\n    .reduce((acc, val) => acc + val, 0);\r\n};\r\n\r\nexport const findByUsername = function (username) {\r\n  return state.accounts.find(acc => acc.username === username);\r\n};\r\n\r\nexport const widthraw = function (amount, acc) {\r\n  acc.movements.push(-amount);\r\n};\r\n\r\nexport const deposit = function (amount, acc) {\r\n  acc.movements.push(amount);\r\n};\r\n\r\nexport const deleteAccount = function () {\r\n  const index = state.accounts.findIndex(\r\n    acc => acc.username === state.currentAccount.username\r\n  );\r\n  state.accounts.splice(index, 1);\r\n};\r\n\r\n// prettier-ignore\r\n// IIFE since we need to create usernames only ones when we start our apps\r\nconst createUsernames = function () {\r\n  state.accounts.forEach(function (acc) {\r\n    acc.username = acc.owner\r\n      .toLowerCase()\r\n      .split(' ')\r\n      .map(word => word[0])\r\n      .join('');\r\n  });\r\n};\r\n\r\ncreateUsernames();\r\n","const containerApp = document.querySelector('.app');\r\n\r\nconst btnLogin = document.querySelector('.login__btn');\r\nconst inputLoginUsername = document.querySelector('.login__input--user');\r\nconst inputLoginPin = document.querySelector('.login__input--pin');\r\n\r\nconst btnTransfer = document.querySelector('.form__btn--transfer');\r\nconst inputTransferTo = document.querySelector('.form__input--to');\r\nconst inputTransferAmount = document.querySelector('.form__input--amount');\r\n\r\nconst btnLoan = document.querySelector('.form__btn--loan');\r\nconst inputLoanAmount = document.querySelector('.form__input--loan-amount');\r\n\r\nconst btnClose = document.querySelector('.form__btn--close');\r\nconst inputCloseUsername = document.querySelector('.form__input--user');\r\nconst inputClosePin = document.querySelector('.form__input--pin');\r\n\r\nexport class UserView {\r\n  static _user;\r\n\r\n  loginUser(user) {\r\n    UserView.prototype._user = user;\r\n  }\r\n\r\n  render(sort = false) {\r\n    const container = document.querySelector('.movements');\r\n    container.innerHTML = '';\r\n\r\n    container.innerHTML = !sort\r\n      ? this._generateString()\r\n      : this._generateString(true);\r\n  }\r\n\r\n  showInterface() {\r\n    containerApp.style.opacity = 100;\r\n    inputLoginUsername.value = inputLoginPin.value = '';\r\n    inputLoginPin.blur();\r\n  }\r\n\r\n  hideInterface() {\r\n    containerApp.style.opacity = 0;\r\n  }\r\n\r\n  addHandlerLogin(handler) {\r\n    btnLogin.addEventListener('click', function (e) {\r\n      e.preventDefault();\r\n      handler(inputLoginUsername.value, +inputLoginPin.value);\r\n    });\r\n  }\r\n\r\n  addHandlerTransfer(handler) {\r\n    btnTransfer.addEventListener('click', function (e) {\r\n      e.preventDefault();\r\n      handler(+inputTransferAmount.value, inputTransferTo.value);\r\n      inputTransferAmount.value = inputTransferTo.value = '';\r\n    });\r\n  }\r\n\r\n  addHandlerLoan(handler) {\r\n    btnLoan.addEventListener('click', function (e) {\r\n      e.preventDefault();\r\n      handler(+inputLoanAmount.value);\r\n      inputLoanAmount.value = '';\r\n    });\r\n  }\r\n\r\n  addHandlerClose(handler) {\r\n    btnClose.addEventListener('click', function (e) {\r\n      e.preventDefault();\r\n      handler(+inputClosePin.value, inputCloseUsername.value);\r\n      inputClosePin.value = inputCloseUsername.value = '';\r\n    });\r\n  }\r\n}\r\n\r\nexport default new UserView();\r\n","import { UserView } from './userView.js';\r\n\r\nconst btnSort = document.querySelector('.btn--sort');\r\n\r\nclass MovementsView extends UserView {\r\n  _generateString(sort = false) {\r\n    let movs = this._user.movements;\r\n\r\n    if (sort) {\r\n      movs = sort ? movs.slice().sort((a, b) => a - b) : movs;\r\n    }\r\n\r\n    const arr = movs.map(function (mov, i) {\r\n      const type = mov > 0 ? 'deposit' : 'withdrawal';\r\n\r\n      const html = `\r\n      <div class=\"movements__row\">\r\n        <div class=\"movements__type movements__type--${type}\">${\r\n        i + 1\r\n      } ${type}</div>\r\n        <div class=\"movements__value\">${mov.toFixed(2)}€</div>\r\n      </div>\r\n          `;\r\n\r\n      return html;\r\n    });\r\n\r\n    return arr.reverse().join('');\r\n  }\r\n\r\n  addHandlerSort(handler) {\r\n    btnSort.addEventListener('click', function (e) {\r\n      e.preventDefault();\r\n      handler();\r\n    });\r\n  }\r\n}\r\n\r\nexport default new MovementsView();\r\n","import { UserView } from './userView.js';\r\n\r\nconst labelWelcome = document.querySelector('.welcome');\r\nconst labelBalance = document.querySelector('.balance__value');\r\n\r\nconst labelSumIn = document.querySelector('.summary__value--in');\r\nconst labelSumOut = document.querySelector('.summary__value--out');\r\nconst labelSumInterest = document.querySelector('.summary__value--interest');\r\n\r\nclass TextView extends UserView {\r\n  setTextViews() {\r\n    labelWelcome.textContent = `Wellcome back, ${\r\n      this._user.owner.split(' ')[0]\r\n    }`;\r\n    labelBalance.textContent = `${this._user.balance.toFixed(2)}€`;\r\n\r\n    // Displaying Summary\r\n    labelSumIn.textContent = `${this._user.summary.income.toFixed(2)}€`;\r\n    labelSumOut.textContent = `${this._user.summary.out.toFixed(2)}€`;\r\n    labelSumInterest.textContent = `${this._user.summary.interest.toFixed(2)}€`;\r\n  }\r\n}\r\n\r\nexport default new TextView();\r\n","import * as model from './model.js';\r\nimport movementsView from './views/movementsView.js';\r\nimport textView from './views/textView.js';\r\nimport userView from './views/userView.js';\r\n\r\n// Elements\r\nconst labelDate = document.querySelector('.date');\r\nconst labelSumIn = document.querySelector('.summary__value--in');\r\nconst labelSumOut = document.querySelector('.summary__value--out');\r\nconst labelSumInterest = document.querySelector('.summary__value--interest');\r\nconst labelTimer = document.querySelector('.timer');\r\n\r\nconst btnTransfer = document.querySelector('.form__btn--transfer');\r\nconst btnLoan = document.querySelector('.form__btn--loan');\r\nconst btnClose = document.querySelector('.form__btn--close');\r\nconst btnSort = document.querySelector('.btn--sort');\r\n\r\nconst inputLoanAmount = document.querySelector('.form__input--loan-amount');\r\nconst inputCloseUsername = document.querySelector('.form__input--user');\r\nconst inputClosePin = document.querySelector('.form__input--pin');\r\n\r\nlet sorted = false; // movements arr\r\n\r\nconst updateAccount = function () {\r\n  model.calcBalance();\r\n  model.calcSummary();\r\n  textView.setTextViews();\r\n  movementsView.render();\r\n};\r\n\r\nconst controlLogin = function (username, pin) {\r\n  model.state.currentAccount = model.findByUsername(username);\r\n\r\n  if (model.state.currentAccount?.pin === pin) {\r\n    userView.loginUser(model.state.currentAccount);\r\n    updateAccount();\r\n    userView.showInterface();\r\n  }\r\n};\r\n\r\nconst controlSort = function () {\r\n  sorted = !sorted;\r\n  sorted === false ? movementsView.render() : movementsView.render(true);\r\n};\r\n\r\nconst controlTransfer = function (amount, receiver) {\r\n  receiver =\r\n    model.findByUsername(receiver) !== model.state.currentAccount\r\n      ? model.findByUsername(receiver)\r\n      : undefined;\r\n\r\n  if (!receiver || model.state.currentAccount.balance < amount || amount <= 0)\r\n    return;\r\n\r\n  model.widthraw(amount, model.state.currentAccount);\r\n  model.deposit(amount, receiver);\r\n\r\n  updateAccount();\r\n};\r\n\r\nconst controlLoan = function (amount) {\r\n  if (\r\n    model.state.currentAccount.movements.some(\r\n      val => val > 0 && val > amount * 0.1\r\n    ) &&\r\n    amount > 0\r\n  ) {\r\n    model.deposit(amount, model.state.currentAccount);\r\n\r\n    updateAccount();\r\n  }\r\n};\r\n\r\nconst controlClose = function (pin, username) {\r\n  if (\r\n    username === model.state.currentAccount.username &&\r\n    pin === model.state.currentAccount.pin\r\n  ) {\r\n    model.deleteAccount();\r\n    userView.hideInterface();\r\n  }\r\n};\r\n\r\nconst init = function () {\r\n  userView.addHandlerLogin(controlLogin);\r\n  userView.addHandlerTransfer(controlTransfer);\r\n  userView.addHandlerLoan(controlLoan);\r\n  userView.addHandlerClose(controlClose);\r\n  movementsView.addHandlerSort(controlSort);\r\n};\r\n\r\ninit();\r\n"],"names":["$0f1d4402dffacf5b$export$ca000e230c0caa3e","accounts","owner","movements","interestRate","pin","currentAccount","$0f1d4402dffacf5b$export$22ec4e3a80ffbff9","username","find","acc","$0f1d4402dffacf5b$export$cfe06c0678a8e4fa","amount","push","forEach","toLowerCase","split","map","word","join","$99ad2e8a230db493$var$containerApp","document","querySelector","$99ad2e8a230db493$var$btnLogin","$99ad2e8a230db493$var$inputLoginUsername","$99ad2e8a230db493$var$inputLoginPin","$99ad2e8a230db493$var$btnTransfer","$99ad2e8a230db493$var$inputTransferTo","$99ad2e8a230db493$var$inputTransferAmount","$99ad2e8a230db493$var$btnLoan","$99ad2e8a230db493$var$inputLoanAmount","$99ad2e8a230db493$var$btnClose","$99ad2e8a230db493$var$inputCloseUsername","$99ad2e8a230db493$var$inputClosePin","$99ad2e8a230db493$export$93c94555daa109c4","loginUser","user","prototype","_user","render","sort","container","innerHTML","this","_generateString","showInterface","style","opacity","value","blur","hideInterface","addHandlerLogin","handler","addEventListener","e","preventDefault","addHandlerTransfer","addHandlerLoan","addHandlerClose","$99ad2e8a230db493$export$2e2bcd8739ae039","$2fdee2e38be15397$var$btnSort","$2fdee2e38be15397$export$2e2bcd8739ae039","movs","slice","a","b","mov","i","type","toFixed","reverse","addHandlerSort","$881fc3bba8aa0887$var$labelWelcome","$881fc3bba8aa0887$var$labelBalance","$881fc3bba8aa0887$var$labelSumIn","$881fc3bba8aa0887$var$labelSumOut","$881fc3bba8aa0887$var$labelSumInterest","$881fc3bba8aa0887$export$2e2bcd8739ae039","setTextViews","textContent","balance","summary","income","out","interest","$f50bd1f2915ed0f2$var$sorted","$f50bd1f2915ed0f2$var$updateAccount","reduce","accum","val","filter","Math","abs","$f50bd1f2915ed0f2$var$controlLogin","$f50bd1f2915ed0f2$var$controlSort","$f50bd1f2915ed0f2$var$controlTransfer","receiver","undefined","$0f1d4402dffacf5b$export$7106aa16ff51e96","$f50bd1f2915ed0f2$var$controlLoan","some","$f50bd1f2915ed0f2$var$controlClose","index","findIndex","splice","$0f1d4402dffacf5b$export$45abfc3976589d02"],"version":3,"file":"index.1417603e.js.map"}